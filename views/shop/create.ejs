
<!--create.ejs-->
<form action="/shop/create" method="POST" onsubmit="return submitForm(this);">
    <div class="row">
     <div class="col-xs-4 col-sm-6">
         <div class="form-group">
                <p><b><label>Add a new shop</label></b></p>
                
            <label>Shop Name</label>
            <input required type="text" class="form-control" name="Shop[shopName]">
    
        
        <label>Shop No.</label>
        <input  required type="text" class="form-control" name="Shop[shopNo]">
    </div>
</div>


<div class="col-xs-4 col-sm-6">
    <div class="form-group">
           <p><b><label>Create a Shop Staff Account</label></b></p>
            <label>Username</label>
            <input required type="text" class="form-control" name="User[username]">
     
                <label>Password</label>
                <input required type="text" class="form-control" name="User[password]">
        
                </div>
            
    
</div>
</div>
<button type="submit" class="btn btn-primary">Submit</button>
</div>

</form>


<script type="text/javascript">

function submitForm(oFormElement) {
        var customFormData = "";
        Object.keys(oFormElement).forEach(function (data) {
            customFormData += encodeURI(oFormElement[data].name) + "=" + encodeURI(oFormElement[data].value) + "&";
        })

        var xhr = new XMLHttpRequest();
        xhr.onload = function () {
            if (xhr.responseText == "create successfully") {
                alert(xhr.responseText);
                // location.reload("/shop/index");
                window.location = "/shop/index";
            }
            else {
                alert(xhr.responseText);
            }
        }

        xhr.open(oFormElement.method, oFormElement.action, true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.send(customFormData + "a");
        return false;
    }
    </script>